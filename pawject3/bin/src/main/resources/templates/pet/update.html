<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{fragments/layout}">
<body>
<div layout:fragment="content">

  <div class="container mt-5">
    <h3>펫 정보 수정</h3>

    <form th:action="@{/pet/update}" method="post" enctype="multipart/form-data">

      <!-- hidden: petId -->
      <input type="hidden" name="petId" th:value="${pet.petId}"/>
      <!-- hidden: CSRF -->
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

      <!-- 이름 -->
      <div class="mb-3 mt-3">
        <label for="petName" class="form-label">펫 이름:</label>
        <input type="text" class="form-control" id="petName"
               placeholder="펫 이름을 입력해주세요" required
               name="petName" th:value="${pet.petName}">
      </div>

      <!-- 품종 -->
      <div class="mb-3">
        <label for="petBreed" class="form-label">펫 품종:</label>
        <input type="text" class="form-control" id="petBreed"
               placeholder="품종을 입력해주세요"
               name="petBreed" th:value="${pet.petBreed}">
      </div>

      <!-- 생일 -->
      <div class="mb-3">
        <label for="birthDate" class="form-label">생일:</label>
        <input type="date" class="form-control" id="birthDate"
               name="birthDate" th:value="${pet.birthDate}">
      </div>

      <!-- 타입 -->
      <div class="mb-3">
        <label for="petTypeId" class="form-label">펫 타입:</label>
        <select class="form-select" id="petTypeId" name="petTypeId" required>
          <option value="1" th:selected="${pet.petTypeId == 1}">Cat</option>
          <option value="2" th:selected="${pet.petTypeId == 2}">Dog</option>
          <option value="3" th:selected="${pet.petTypeId == 3}">Other</option>
        </select>
      </div>

      <!-- 나이 (pAge) -->
      <div class="mb-3">
        <label for="pAge" class="form-label">나이:</label>
        <input type="number" class="form-control" id="pAge"
               name="pAge" th:value="${pet.pAge}" min="0">
      </div>

      <!-- 성별 (pGender) -->
      <div class="mb-3">
        <label for="pGender" class="form-label">성별:</label>
        <select class="form-select" id="pGender" name="pGender">
          <option value="M" th:selected="${pet.pGender == 'M'}">수컷</option>
          <option value="F" th:selected="${pet.pGender == 'F'}">암컷</option>
        </select>
      </div>

      <!-- 이미지 업로드 -->
      <div class="mb-3">
        <label for="file" class="form-label">펫 이미지 수정:</label>
        <input type="file" class="form-control" id="file" name="file">
      </div>

      <!-- 현재 이미지 -->
      <input type="hidden" name="pFile" th:value="${pet.pFile}">
      <div class="mb-3">
        <label for="currentFile" class="form-label">현재 등록된 이미지:</label>
        <input type="text" class="form-control" id="currentFile"
               th:value="${pet.pFile}" readonly>
      </div>

      <!-- 버튼 -->
      <button type="submit" class="btn btn-mustard">펫 정보 수정</button>
      <a th:href="@{/pet/detail(petId=${pet.petId})}" class="btn btn-sage">뒤로가기</a>
    </form>
  </div>

</div>
</body>
</html>