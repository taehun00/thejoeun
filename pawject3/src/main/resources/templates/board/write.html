<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragments/layout}">
<head lang="ko">
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div layout:fragment="content">
      <h3 class="card-header"> ë°˜ë ¤ë™ë¬¼ ì§ˆí™˜ ê¸€ì“°ê¸°</h3>
	  <form th:action="@{/board/write}"  method="post"  enctype="multipart/form-data"> 
	     <!--  <input type="hidden"   name="app_user_id"  value="">  -->
	      <div class="mb-3">
		    <label for="userid" class="form-label">WRITER:</label>
		    <input type="text" class="form-control" id="userid"  name="userid">
		  </div>
		
		  
		  <div class="mb-3 mt-3">
		    <label for="disname" class="form-label">ì§ˆí™˜ëª…:</label>
		    <input type="text" class="form-control" id="disname" 
		    	placeholder="ì§ˆí™˜ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" name="disname"   th:value="${dto.disname}">
		  </div>
		  <div class="mb-3">
		    <label for="bpass" class="form-label">PASS:</label>
		    <input type="password" class="form-control" id="bpass"
		    	 placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" name="bpass">
		  </div>
		  
		  <!-- <div class="mb-3">
		    <label for="bcontent" class="form-label">CONTENT:</label>
		    <textarea class="form-control" id="bcontent" placeholder="ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" 
		    	name="bcontent"  th:text="${dto.bcontent}"></textarea>
		  </div>  -->
		  
		  <div class="mb-3">
		    <label for="disex" class="form-label">ì§ˆí™˜ëª… ì„¤ëª…:</label>
		    <textarea class="form-control" id="disex" placeholder="ì§ˆí™˜ëª… ì„¤ëª…í•´ì£¼ì„¸ìš”"   
		    	name="disex"   th:text="${dto.disex}"></textarea>
		  </div> 
		  
		    <div class="mb-3">
		    <label for="kindpet" class="form-label">ë°˜ë ¤ë™ë¬¼ ì¢…:</label>
		    <textarea class="form-control" id="kindpet" placeholder="ë°˜ë ¤ë™ë¬¼ ì¢…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"   
		    	 name="kindpet"   th:text="${dto.kindpet}"></textarea>
		  </div> 
		  
		    <div class="mb-3">
		    <label for="infval" class="form-label">ì§ˆí™˜ëª…ê´€ë ¨ ìˆ˜ì¹˜:</label>
		    <textarea class="form-control" id="infval" placeholder="ì§ˆí™˜ëª…ê´€ë ¨ ìˆ˜ì¹˜ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"   
		    	 name="infval"   th:text="${dto.infval}"></textarea>
		  </div> 
		  
		    <div class="mb-3">
		    <label for="mannote" class="form-label">ì§ˆí™˜ëª…ê´€ë ¨ ì£¼ì˜ ì‚¬í•­:</label>
		    <textarea class="form-control" id="mannote" placeholder="ì§ˆí™˜ëª…ê´€ë ¨ ì£¼ì˜ì‚¬í•­ ì…ë ¥í•´ì£¼ì„¸ìš”"   
		    	 name="mannote"   th:text="${dto.mannote}"></textarea>
		  </div> 
		  
		  
		  
		  <!-- <div class="mb-3">
		    <label for="file" class="form-label">FILE:</label>
		    <input type="file" class="form-control" id="file" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”" name="file">
		  </div> -->
		  
		  <div class="mb-3  text-end">
				<button type="button" class="btn btn-secondary"
					onclick="autoFillByAI()">ğŸ¤– AI ìë™ì™„ì„±</button>
				<button type="submit" class="btn btn-primary">ê¸€ì“°ê¸°</button>  
		  	<a th:href="@{/board/list}"  class="btn btn-primary">ëª©ë¡ë³´ê¸°</a>
		  </div>
	 </form> 
	</div>

	<script>
		async function autoFillByAI() {

			const disname = document.getElementById("disname").value;

			if (!disname) {
				alert("ì§ˆí™˜ëª…ì„ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.");
				return;
			}

			const res = await
			fetch("/api/ai/autocomplete", {
				method : "POST",
				headers : {
					"Content-Type" : "application/json"
				},
				body : JSON.stringify({
					disname : disname
				})
			});

			if (!res.ok) {
				alert("AI í˜¸ì¶œ ì‹¤íŒ¨");
				return;
			}

			const data = await
			res.json();

			document.getElementById("disex").value = data.disex;
			document.getElementById("kindpet").value = data.kindpet;
			document.getElementById("infval").value = data.infval;
			document.getElementById("mannote").value = data.mannote;
		}
	</script>



</body>
</html>