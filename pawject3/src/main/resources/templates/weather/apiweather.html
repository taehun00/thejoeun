<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
   xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{fragments/layout}">
<!--    #1. layout 렌더링    -->
<head lang="ko">
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
   <div layout:fragment="content"   >
         <h3 class="card-header my-3">KMA 기상청 단기예보</h3>
         <table class="table table-striped  table-bordered  table-hover  weather_result">
            <caption>우리동네 단기예보</caption>
            <thead>
               <tr>
					<th scope="col">하늘상태</th>
					<th scope="col">일 최고기온</th>
			   		<th scope="col">일 최저기온</th>
					<th scope="col">습도</th>
			   		<th scope="col">강수량</th>
			   		<th scope="col">날짜</th>
               </tr>
            </thead>
            <tbody></tbody>
         </table>
         <script>
         	$(function(){
         		$(".weather_result  tbody").empty();
         		$.ajax({
         			url:"/execapi/saveweatherapi",
         			type:"get",
         			dataType:"xml",
         			success:function(xml){
         				console.log(xml);
         				$(xml).find("item").each(function(i, el){
         					let tr  = $("<tr>");
         					let td2 = $("<td>").html( $(el).find("SKY").text() );
         					let td2 = $("<td>").html( $(el).find("TMX").text() );
         					let td3 = $("<td>").html( $(el).find("TMN").text() );
         					let td4 = $("<td>").html( $(el).find("REH").text() );
         					let td5 = $("<td>").html( $(el).find("POP").text() );
         					let td6 = $("<td>").html( $(el).find("baseDate").text() );
         					tr.append(td1).append(td2).append(td3);
         					$(".weather_result tbody").append(tr);
         				});
         			},
               	    error:function(xhr, status, error){ $("#response").text(  xhr.responseText); }
         		});
         	});
         </script>
   </div> 
   <!--    http://localhost:8484/api/weather -->
</body>
</html>