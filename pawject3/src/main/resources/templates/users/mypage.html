<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">
<head>
    <meta charset="UTF-8">
    <title>MYPAGE</title>
</head>
<body>

<div layout:fragment="content">
<div th:if="${success}">
        <script th:inline="javascript">
            /*<![CDATA[*/
            alert([[${success}]]);
            /*]]>*/
        </script>
    </div>

  <!-- 유저 카드 -->
  <div class="container my-5">
    <div class="card shadow-sm">
      <div class="card-header bg-info text-white">
        <h3 class="mb-0">MYPAGE</h3>
      </div>
      <div class="card-body d-flex align-items-center">
        <!-- 프로필 이미지 -->
        <div class="me-4">
          <img th:if="${dto.ufile != null}"
               th:src="@{/upload/{ufile}(ufile=${dto.ufile})}"
               alt="프로필" class="rounded-circle border" style="width:120px; height:120px;">
        </div>
        <!-- 유저 정보 -->
        <ul class="list-group list-group-flush flex-fill">
          <li class="list-group-item"><strong>Email:</strong> <span th:text="${dto.email}"></span></li>
          <li class="list-group-item"><strong>Nickname:</strong> <span th:text="${dto.nickname}"></span></li>
          <li class="list-group-item"><strong>Mobile:</strong> <span th:text="${dto.mobile}"></span></li>
          <li class="list-group-item"><strong>가입일:</strong> <span th:text="${dto.createdAt}"></span></li>
        </ul>
      </div>
      <div class="card-footer text-end">
      	<a th:href="@{/users/changepassword}" class="btn btn-mustard">비밀번호 변경</a>
        <a th:href="@{/users/update}" class="btn btn-mustard">UPDATE</a>
        <a th:href="@{/users/delete}" class="btn btn-burgundy">DELETE</a>
      </div>
    </div>
  </div>

  <!-- 펫 정보 -->
  <div class="container my-4">
    <h4 class="mb-3">등록된 펫 정보</h4>
    <div class="row">

      <div class="col-md-4 mb-3" th:each="pet : ${pets}">
        <div class="card h-100 shadow-sm">
          <img th:if="${pet.pFile != null}"
               th:src="@{/upload/{pfile}(pfile=${pet.pFile})}"
               class="card-img-top" alt="펫 이미지" style="height:200px; object-fit:cover;">
          <div class="card-body">
            <h5 class="card-title">
              <a th:href="@{/pet/detail(petId=${pet.petId})}" class="text-decoration-none"
                 th:text="${pet.petName}"></a>
            </h5>
            <p class="card-text">
              <strong>품종:</strong> <span th:text="${pet.petBreed}"></span><br>
              <strong>생일:</strong> <span th:text="${pet.birthDate}"></span><br>
              <strong>나이:</strong> <span th:text="${pet.pAge}"></span><br>
              <strong>성별:</strong>
              <span th:switch="${pet.pGender}">
                <span th:case="'M'">남</span>
                <span th:case="'F'">여</span>
                <span th:case="'U'">미상</span>
              </span><br>
              <strong>타입:</strong>
              <span th:switch="${pet.petTypeId}">
                <span th:case="'1'">고양이</span>
                <span th:case="'2'">강아지</span>
                <span th:case="*">기타</span>
              </span><br>
              <strong>등록일:</strong> <span th:text="${pet.createdAt}"></span>
            </p>
          </div>
        </div>
      </div>

    </div>
    <div class="text-end mt-3">
      <a th:href="@{/pet/join}" class="btn btn-mint">펫 작성하기</a>
    </div>
  </div>

  

</div>
</body>
</html>