<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragments/layout}">
<head lang="ko">
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div layout:fragment="content">
    
<div class="faq-container">

    <h2 class="faq-title">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h2>

   <table class="faq-table table table-bordered table-hover align-middle text-center">
        <caption class="visually-hidden">FAQ</caption>
        <thead class="table-light">
            <tr>
                <th scope="col">NO.</th>
                <th scope="col">ë¶„ë¥˜</th>
                <th scope="col">ì§ˆë¬¸</th>
                <th scope="col">ë“±ë¡ì¼</th>
                <th scope="col">ìˆ˜ì •ì¼</th>
                <th scope="col">ì‚¬ìš©ì—¬ë¶€</th>
            </tr>
        </thead>

		<tbody>
			<th:block th:each="f, status : ${list}">
			    <tr th:onclick="|toggleContent(${f.faqid})|">
			        <td th:text="${status.index + 1}"></th>
			        <td th:text="${f.category}"></td>
			        <td th:text="${f.question}"></td>
			        <td th:text="${f.createdat}"></td>
			        <td th:text="${f.updatedat}"></td>
			        <td>
					<button type="button" class="btn quickactive-btn"
					        th:data-faqid="${f.faqid}"
					        th:classappend="${f.isactive == 1} ? 'btn-success' : 'btn-olive'"
					        th:text="${f.isactive == 1 ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}">
					</button>
					</td>
			    </tr>
			
			    <tr th:id="'content-' + ${f.faqid}" style="display:none;">			    
					<td colspan="5" class="detail">
					    <p class="faq-answer" th:text="${f.answer}"></p>
					    <div class="faq-keyword-wrap">
					        <button type="button"
					                class="btn btn-sm btn-outline-secondary"
					                th:text="${f.keywords}">
					        </button>
					    </div>
					</td>
				    <td colspan="6">
				        <div class="d-flex justify-content-end gap-3 mt-3">
						<a th:href="@{/faqBoard/faqedit(faqid=${f.faqid})}" class="btn btn-primary">ìˆ˜ì •</a>
				        </div>
				    </td>
			    </tr>

			</th:block>

		</tbody>
	</table>

	<div class="write-btn-area">
				<p class="text-end">
				<a th:href="@{/faqBoard/faqwrite}" 
				class="btn btn-slateBlue">ê¸€ì“°ê¸°</a>
				</p>
	</div>
	
			<div class="help-container">
			    <h4>ë‹¤ë¥¸ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?</h4>
			
			    <div class="faq-card-wrapper">
			        <a href="#" class="faq-directquestion">
			            <p>ğŸ’Œ1:1 ì§ˆë¬¸í•˜ê¸°</p>
			            <p>ê¶ê¸ˆí•˜ì‹  ì‚¬í•­ì„ ì•Œë ¤ì£¼ì‹œë©´</p>
			            <p>24ì‹œê°„ ë‚´ ë‹µë³€ì„ ë“œë ¤ìš”</p>
			        </a>
			
			        <a href="#" class="faq-chatroom">
			            <p>ğŸ’¬ì±„íŒ… ë¬¸ì˜í•˜ê¸°</p>
			            <p>ì±—ë´‡ì´ 24ì‹œê°„ ì–¸ì œë“ ì§€</p>
			            <p>ê¶ê¸ˆí•˜ì‹  ì ì„ ì•Œë ¤ë“œë ¤ìš”</p>
			        </a>
			    </div>
			</div>
</div>

<script>
function toggleContent(id) {
  const row = document.getElementById("content-" + id);
  row.style.display = (row.style.display === "table-row") ? "none" : "table-row";
}
</script>

<script th:inline="javascript">
/*<![CDATA[*/
var csrfHeader = /*[[${_csrf.headerName}]]*/ 'X-CSRF-TOKEN';
var csrfToken = /*[[${_csrf.token}]]*/ '';
/*]]>*/
</script>

<script>

$(document).ready(function(){
    $(".quickactive-btn").on("click", function() {
        let faqid = $(this).data("faqid");
        if(confirm("í™œì„±í™” ìƒíƒœë¥¼ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            $.ajax({
                url: "/faqBoard/quickactive",
                type: "POST",
                beforeSend: function(xhr) {
                    xhr.setRequestHeader(csrfHeader, csrfToken);
                },
                data: { faqid: faqid },
                success: function() {
					 location.reload();
                },
                error: function() {
                    alert("error");
                }
            });
        }
    });
});
</script>




</div><!-- content-->
</body>
</html>