<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{fragments/layout}">
<head lang="ko">
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	<div layout:fragment="content">

<script th:inline="javascript">
/*<![CDATA[*/
var csrfHeader = /*[[${_csrf.headerName}]]*/ 'X-CSRF-TOKEN';
var csrfToken = /*[[${_csrf.token}]]*/ '';
/*]]>*/
</script>   
   
    
<div class="faq-container">

    <h2 class="faq-title">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h2>
     

   <table class="faq-table table table-bordered table-hover align-middle text-center">
   <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <caption class="visually-hidden">FAQ</caption>
        
        <thead class="table-light">
            <tr>
                <th scope="col">NO.</th>
                <th scope="col">ë¶„ë¥˜</th>
                <th scope="col">ì§ˆë¬¸</th>
                <th scope="col">ë“±ë¡ì¼</th>
                <th scope="col">ìˆ˜ì •ì¼</th>
                <th scope="col"
                	sec:authorize="hasRole('ROLE_ADMIN')">ì‚¬ìš©ì—¬ë¶€</th>
            </tr>
        </thead>

		<tbody>
			<th:block th:each="f, status : ${list}">
			    <tr th:onclick="|toggleContent(${f.faqid})|">
			        <td th:text="${status.index + 1}"></th>
			        <td th:text="${f.category}"></td>
			        <td th:text="${f.question}"></td>
			        <td th:text="${f.createdat}"></td>
			        <td th:text="${f.updatedat}"></td>
			        <td sec:authorize="hasRole('ROLE_ADMIN')">
					<button type="button" class="btn quickactive-btn"
					        th:data-faqid="${f.faqid}"
					        th:classappend="${f.isactive == 1} ? 'btn-success' : 'btn-olive'"
					        th:text="${f.isactive == 1 ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}">
					</button>
					</td>
			    </tr>
			
			    <tr th:id="'content-' + ${f.faqid}" style="display:none;">			    
					<td colspan="5" class="detail">
					    <p class="faq-answer" th:text="${f.answer}"></p>
					    <div class="faq-keyword-wrap"
						    sec:authorize="hasRole('ROLE_ADMIN')">
					        <button type="button"
					                class="btn btn-sm btn-outline-secondary"
					                th:text="${f.keywords}">
					        </button>
					    </div>
					</td>
				    <td colspan="6"
				    	sec:authorize="hasRole('ROLE_ADMIN')">
				        <div class="d-flex justify-content-end gap-3 mt-3">
						<a th:href="@{/faqBoard/faqedit(faqid=${f.faqid})}" class="btn btn-primary">ìˆ˜ì •</a>
				        </div>
				    </td>
			    </tr>

			</th:block>

		</tbody>
	</table>

	<div class="write-btn-area"
	sec:authorize="hasRole('ROLE_ADMIN')">
				<p class="text-end">
				<a th:href="@{/faqBoard/faqwrite}" 
				class="btn btn-slateBlue">ê¸€ì“°ê¸°</a>
				<a th:href="@{/csBoard/cslistadmin}" class="btn btn-mint">1:1ë¬¸ì˜ê´€ë¦¬</a>
				
				</p>
				
				
				
	</div>
	
			<div class="help-container">
			    <h4>ë‹¤ë¥¸ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?</h4>	
	
			    <div class="faq-card-wrapper">
			        <a th:href="@{/csBoard/cswrite}"  class="faq-directquestion">
			            <p>ğŸ’Œ1:1 ë¬¸ì˜í•˜ê¸°</p>
			            <p>ê¶ê¸ˆí•˜ì‹  ì‚¬í•­ì„ ë‚¨ê²¨ì£¼ì„¸ìš”</p>
			            <p>ìˆœì°¨ì ìœ¼ë¡œ ë‹µë³€í•´ ë“œë¦½ë‹ˆë‹¤</p>
			        </a>			        

			
			        <div class="faq-chatroom" id="chatbtn">
			            <p>ğŸ’¬ì±„íŒ… ë¬¸ì˜í•˜ê¸°</p>
						<p>ìƒë‹´ ê°€ëŠ¥ ì‹œê°„:</p>
						<p>í‰ì¼ 10:00 ~ 18:00</p>
			        </div>
			    </div>
			</div>
</div>







<script>
//ì±„íŒ…
  (function(){var w=window;if(w.ChannelIO){return w.console.error("ChannelIO script included twice.");}var ch=function(){ch.c(arguments);};ch.q=[];ch.c=function(args){ch.q.push(args);};w.ChannelIO=ch;function l(){if(w.ChannelIOInitialized){return;}w.ChannelIOInitialized=true;var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src="https://cdn.channel.io/plugin/ch-plugin-web.js";var x=document.getElementsByTagName("script")[0];if(x.parentNode){x.parentNode.insertBefore(s,x);}}if(document.readyState==="complete"){l();}else{w.addEventListener("DOMContentLoaded",l);w.addEventListener("load",l);}})();

  ChannelIO('boot', {
    "pluginKey": "afb5a7b9-9200-440f-999a-7f0ef91db208",
    "memberId": "userid"
  });

	
	document.addEventListener("DOMContentLoaded", function() {
		const chatbtn = document.getElementById("chatbtn");

		chatbtn.addEventListener("click", function(e) {
			e.preventDefault();
			ChannelIO('show');
		});
	});
	
//í† ê¸€
function toggleContent(id) {
  const row = document.getElementById("content-" + id);
  row.style.display = (row.style.display === "table-row") ? "none" : "table-row";
}


//í™œì„±í™”ë²„íŠ¼
$(document).ready(function(){
    $(".quickactive-btn").on("click", function() {
        let faqid = $(this).data("faqid");
        if(confirm("í™œì„±í™” ìƒíƒœë¥¼ ë³€ê²½í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
            $.ajax({
                url: "/faqBoard/quickactive",
                type: "POST",
                beforeSend: function(xhr) {
                    xhr.setRequestHeader(csrfHeader, csrfToken);
                },
                data: { faqid: faqid },
                success: function() {
					 location.reload();
                },
                error: function() {
                    alert("error");
                }
            });
        }
    });
});
</script>




</div><!-- content-->
</body>
</html>