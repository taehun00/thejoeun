<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pawject.dao.support.CSQuestionDao"> 
  <resultMap id="CSQuestionMap" type="CSQuestionDto">
    <result property="questionid" column="QUESTIONID"/>
    <result property="userid" column="USERID"/>
    <result property="category"    column="CATEGORY"/>
    <result property="title"  column="TITLE"/>
    <result property="content"  column="CONTENT"/>
    <result property="status"  column="STATUS"/>
    <result property="createdat"      column="CREATEDAT"/>

  </resultMap> 
  
  <!-- 전체 조회 -->
  <select resultMap="CSQuestionMap" id="selectCSQAll">
  	SELECT * FROM CSQUESTION
  </select>
  
  <!-- 특정 질문 조회 -->	
  <select resultMap="CSQuestionMap" id="selectCSQ" parameterType="int">
	SELECT * FROM CSQUESTION WHERE QUESTIONID=#{questionid}
  </select>
  
  <!-- 유저 작성글 조회 -->
  <select resultMap="CSQuestionMap" id="selectCSQUser" parameterType="CSQuestionDto">
  	SELECT * FROM CSQUESTION WHERE USERID=#{userid}
  </select>  
  
 
  <!-- 등록 -->
  <insert id="insertCSQ" parameterType="CSQuestionDto">
INSERT INTO CSQUESTION(QUESTIONID, USERID, CATEGORY, TITLE, CONTENT)
        VALUES(CSQUESTION_SEQ.NEXTVAL, #{userid}, #{category}, #{title}, #{content})
  </insert>
  

  
  <!-- 답변 완료 전환-->
  <update id="answerCSQ" parameterType="CSQuestionDto">
    UPDATE CSQUESTION SET STATUS = CASE WHEN STATUS = 1 THEN 0	ELSE 1 END
    WHERE QUESTIONID = #{questionid}
  </update>
  
  <delete id="deleteCSQ" parameterType="int">
  DELETE FROM CSQUESTION WHERE QUESTIONID=#{questionid}
  </delete>


 <!-- 특정 유저(서치 추가 시)SELECT * FROM CSQUESTION WHERE USERID=1;-->
 <!-- 미답변 확인(서치 추가 시) SELECT * FROM CSQUESTION WHERE STATUS=0;-->
  



</mapper>