<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pawject.dao.exec.ExecBoardDao">

	<insert id="insert1" parameterType="ExecBoardDto">
		insert into execboard
		(postid,
		execid, userid, etitle, econtent, eimg)
		values
		(execboard_seq.nextval,
		#{execid} , #{userid}, #{etitle},
		#{econtent},
		#{eimg})

	</insert>
	
	<insert id="insert2" parameterType="ExecBoardDto">
		insert into execboard
		(postid,
		execid, userid, etitle, econtent, eimg)
		values
		(execboard_seq.nextval,
		#{execid} , #{userid}, #{etitle},
		#{econtent},
		#{eimg})
	</insert>

	<update id="update1" parameterType="ExecBoardDto">
		update execboard
		set
		etitle=#{etitle},
		econtent=#{econtent},
		execid=#{execid}, eimg=#{eimg}
		where postid=#{postid}
	</update>
	
	<update id="update2" parameterType="ExecBoardDto">
		update execboard
		set
		etitle=#{etitle},
		econtent=#{econtent},
		execid=#{execid}, eimg=#{eimg}
		where postid=#{postid}
	</update>
	
	<update id="updateHit" parameterType="int">
		update execboard set ehit
		= ehit+1 where postid=#{postid}
	</update>

	<delete id="delete1" parameterType="ExecBoardDto">
		delete from execboard where
		postid=#{postid} and execid=#{execid}
	</delete>

	<!-- 명시적매핑 -->
	<resultMap type="ExecBoardDto" id="ExecBoardMap">
		<result property="postid" column="POSTID" />
		<result property="execid" column="EXECID" />
		<result property="userid" column="USERID" />
		<result property="etitle" column="ETITLE" />
		<result property="econtent" column="ECONTENT" />
		<result property="eimg" column="EIMG" />
		<result property="ehit" column="EHIT" />
		<result property="createdAt" column="CREATEAT" />
		<result property="updatedat" column="UPDATEDAT" />
	</resultMap>

	<select resultMap="ExecBoardMap" id="selectAll1">
		select * from execboard
		order by postid desc
	</select>

	<select resultMap="ExecBoardMap" id="select1"
		parameterType="int">
		select * from execboard where postid=#{postid}
	</select>

	<!-- paging -->
	<select resultMap="ExecBoardMap" id="select10"
		parameterType="java.util.HashMap">
		select * from ( select row_number() over (order by createdat desc) as rnum,
		postid, execid, userid, etitle, econtent, eimg, ehit, createdat,
		updatedat
		from execboard ) A where A.rnum between #{start} and #{end}
	</select>

	<select resultType="int" id="selectTotalCnt">
		select count(*) from execboard
	</select>
</mapper>





<!-- CREATE(insert) -->
<!-- insert into execboard (postid, execid, userid, etitle, econtent, eimg 
	) values (execboard_seq.nextval, #{execid} , #{userid}, #{etitle}, #{econtent}, 
	#{eimg}) -->

<!-- READ(select) -->
<!-- 전체보기 -->
<!-- select * from execboard order by postid desc -->

<!-- 상세보기 -->
<!-- select * from execboard where postid=#{postid} -->

<!-- 페이징 -->
<!-- select * from ( select row_number() over (order by createdat desc) as 
	rnum, postid, execid, userid, etitle, econtent, eimg, ehit, createdat, updatedat 
	from execboard ) A where A.rnum between #{start} and #{end}; -->

<!-- UPDATE -->
<!-- update execboard set etitle=#{etitle}, econtent=#{econtent} , execid=#{execid}, 
	eimg=#{eimg} where postid=#{postid} -->

<!-- DELETE -->
<!-- delete from execboard where postid=#{postid} and execid=#{execid} -->



