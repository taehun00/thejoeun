<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pawject.dao.exec.ExecBoardDao">
	<!-- 명시적매핑 -->

<!-- 	<resultMap id="ExecBoardMap" type="ExecBoardDto">
		<result property="postid" column="POSTID" />
		<result property="execid" column="EXECID" />
		<result property="userid" column="USERID" />
		<result property="etitle" column="ETITLE" />
		<result property="econtent" column="ECONTENT" />
		<result property="eimg" column="EIMG" />
		<result property="ehit" column="EHIT" />
		<result property="createdAt" column="CREATEAT" />
		<result property="updatedat" column="UPDATEDAT" />
	</resultMap>

	<resultMap id="ExecInfoMap" type="ExecInfoDto" >
		<result property="execid"         column="EXECID"/>
		<result property="exectype"       column="EXECTYPE"/>
		<result property="description"    column="DESCRIPTION"/>
		<result property="avgkcal30min"   column="AVGKCAL30MIN"/>
		<result property="exectargetmin"  column="EXECTARGETMIN"/>
		<result property="suitablefor"    column="SUITABLEFOR"/>
		<result property="intensitylevel" column="INTENSITYLEVEL"/>
	</resultMap>
 -->

	<insert id="insert1" parameterType="ExecBoardDto">
		insert into execboard (postid,
		execid, userid, etitle, econtent, eimg )
		values (execboard_seq.nextval,
		#{execid} , #{userid}, #{etitle},
		#{econtent}, #{eimg})
	</insert>

	<update id="update1" parameterType="ExecBoardDto">
		update execboard
		set etitle=#{etitle},
		econtent=#{econtent} ,
		execid=#{execid}, eimg=#{eimg}
		where postid=#{postid}
	</update>
	<!-- <update id="updateHit" parameterType="int"> update execboard set ehit 
		= ehit+1 where postid=#{postid} </update> -->
	
	<delete id="delete1" parameterType="ExecBoardDto">
		delete from execboard where
		postid=#{postid} and execid=#{execid}
	</delete>

	<select resultType="ExecBoardDto" id="selectAll1">
		select * from execboard
		order by postid desc
	</select>

	<select resultType="ExecBoardDto" id="select1" parameterType="int">
		select * from execboard where postid=#{postid}
	</select>

	<!-- paging -->
	<!-- <select resultMap="ExecBoardMap" id="select10" parameterType="java.util.HashMap"> 
		select * from ( select row_number() over (order by createdat desc) as rnum, 
		postid, execid, userid, etitle, econtent, eimg, ehit, createdat, updatedat 
		from execboard ) A where A.rnum between #{start} and #{end} </select> <select 
		resultType="int" id="selectTotalCnt"> select cnt(*) from execboard </select> -->

	<!-- 운동정보(운동챌린지게시판 작성시 참고용) -->
<!-- 	<insert id="insert2" parameterType="ExecInfoDto">
		insert into exerciseinfo (execid, exectype, description, avgkcal30min, exectargetmin, suitablefor, intensitylevel ) 
		values(exerciseinfo_seq.nextval, #{exectype}, #{description}, #{avgkcal30min}, #{exectargetmin}, #{suitablefor}, #{intensitylevel} )
	</insert>
	<select resultType="ExecInfoDto" id="selectAll2">
		select * from exerciseinfo
		order by execid desc
	</select>
	<select resultType="ExecInfoDto" id="select2" parameterType="int">
		select * from exerciseinfo where execid=#{execid}
	</select>
 -->

</mapper>

<!-- CREATE(insert) -->
<!-- insert into execboard (postid, execid, userid, etitle, econtent, eimg 
	) values (execboard_seq.nextval, #{execid} , #{userid}, #{etitle}, #{econtent}, 
	#{eimg}) -->

<!-- READ(select) -->
<!-- 전체보기 -->
<!-- select * from execboard order by postid desc -->

<!-- 상세보기 -->
<!-- select * from execboard where postid=#{postid} -->

<!-- 페이징 -->
<!-- select * from ( select row_number() over (order by createdat desc) as 
	rnum, postid, execid, userid, etitle, econtent, eimg, ehit, createdat, updatedat 
	from execboard ) A where A.rnum between #{start} and #{end}; -->

<!-- UPDATE -->
<!-- update execboard set etitle=#{etitle}, econtent=#{econtent} , execid=#{execid}, 
	eimg=#{eimg} where postid=#{postid} -->

<!-- DELETE -->
<!-- delete from execboard where postid=#{postid} and execid=#{execid} -->



