CREATE TABLE USERS (
    USERID       NUMBER          PRIMARY KEY,         
    EMAIL        VARCHAR2(200)   NOT NULL UNIQUE,     
    NICKNAME     VARCHAR2(100)   NOT NULL,            
    PASSWORD     VARCHAR2(100)   NOT NULL,            
    UFILE        VARCHAR2(255),                       
    CREATEDAT    DATE            DEFAULT SYSDATE,     
    MOBILE       VARCHAR2(200),                       
    PROVIDER     VARCHAR2(50),                        
    PROVIDERID   VARCHAR2(100)                        
);

CREATE TABLE ROLES (
    AUTHID   NUMBER          PRIMARY KEY,     
    EMAIL    VARCHAR2(100)   NOT NULL,        
    AUTH     VARCHAR2(100)   NOT NULL         
);

ALTER TABLE ROLES
    ADD CONSTRAINT fk_roles_email FOREIGN KEY (EMAIL)
        REFERENCES USERS (EMAIL)
        ON DELETE CASCADE;

CREATE TABLE PETS (
    PETID          NUMBER          PRIMARY KEY,        
    USERID         NUMBER          NOT NULL,           
    PETNAME        VARCHAR2(100)   NOT NULL,           
    PETBREED       VARCHAR2(100),                      
    BIRTHDATE      VARCHAR2(100),                      
    PETTYPEID      NUMBER          NOT NULL,           
    PFILE          VARCHAR2(255),                      
    CREATEDAT      DATE            DEFAULT SYSDATE,    
    AGE            NUMBER,                             
    GENDER         VARCHAR2(10),                       
    WEIGHT         NUMBER,                             
    HEIGHT         NUMBER,                             
    BODYSCORE      NUMBER,                             
    ACTIVITYLEVEL  NUMBER                              
);

ALTER TABLE PETS
    ADD CONSTRAINT fk_pets_userid FOREIGN KEY (USERID)
        REFERENCES USERS (USERID)
        ON DELETE CASCADE;

ALTER TABLE PETS
    ADD CONSTRAINT fk_pets_pettype FOREIGN KEY (PETTYPEID)
        REFERENCES PETTYPE (PETTYPEID);

CREATE TABLE PETDISEASE (
    PETDISEASEID NUMBER PRIMARY KEY,   
    PETID        NUMBER NOT NULL,      
    DISEASEID    NUMBER NOT NULL       
);

ALTER TABLE PETDISEASE
    ADD CONSTRAINT fk_petdisease_pet FOREIGN KEY (PETID)
        REFERENCES PETS (PETID)
        ON DELETE CASCADE;

ALTER TABLE PETDISEASE
    ADD CONSTRAINT fk_petdisease_disease FOREIGN KEY (DISEASEID)
        REFERENCES DISEASE (DISNO);

CREATE TABLE PETFOOD (
    PETFOODID NUMBER PRIMARY KEY,   
    PETID     NUMBER NOT NULL,      
    FOODID    NUMBER NOT NULL       
);

ALTER TABLE PETFOOD
    ADD CONSTRAINT fk_petfood_pet FOREIGN KEY (PETID)
        REFERENCES PETS (PETID)
        ON DELETE CASCADE;

ALTER TABLE PETFOOD
    ADD CONSTRAINT fk_petfood_food FOREIGN KEY (FOODID)
        REFERENCES FOOD (FOODID);

CREATE TABLE NOTIFICATION_A (
    notificationAID NUMBER PRIMARY KEY,   
    USERID          NUMBER NOT NULL,      
    REVIEWID        NUMBER NOT NULL,      
    MESSAGE         VARCHAR2(255),        
    CREATEDAT       DATE DEFAULT SYSDATE  
);

ALTER TABLE NOTIFICATION_A
    ADD CONSTRAINT fk_notia_user FOREIGN KEY (USERID)
        REFERENCES USERS (USERID)
        ON DELETE CASCADE;

ALTER TABLE NOTIFICATION_A
    ADD CONSTRAINT fk_notia_review FOREIGN KEY (REVIEWID)
        REFERENCES REVIEW (REVIEWID);

CREATE TABLE NOTIFICATION_M (
    notificationMID NUMBER PRIMARY KEY,
    USERID          NUMBER NOT NULL,
    BOARDTYPE       VARCHAR2(50) NOT NULL,
    TYPE            VARCHAR2(50) NOT NULL,
    MESSAGE         VARCHAR2(255),
    CREATEDAT       DATE DEFAULT SYSDATE
);

ALTER TABLE NOTIFICATION_M
    ADD CONSTRAINT fk_notim_user FOREIGN KEY (USERID)
        REFERENCES USERS (USERID)
        ON DELETE CASCADE;

CREATE TABLE NOTIFICATION (
    NOTIFICATIONID NUMBER PRIMARY KEY,   
    BOARDTYPE      VARCHAR2(50) NOT NULL,
    TYPE           VARCHAR2(50) NOT NULL,
    MESSAGE        VARCHAR2(255)         
);

ALTER TABLE NOTIFICATION
    ADD CONSTRAINT fk_notification_boardtype_type 
    FOREIGN KEY (BOARDTYPE, TYPE)
    REFERENCES NOTIFICATION_M (BOARDTYPE, TYPE)
    ON DELETE CASCADE;
